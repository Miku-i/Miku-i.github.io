{"ast":null,"code":"var _jsxFileName = \"/Users/miku/work/react/react-work/demo/src/app.js\";\nimport React, { Component } from \"react\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport axios from 'axios';\nimport Home from \"./components/home/index\";\nimport Register from \"./components/register/\";\nimport Personal from \"./components/personal/index\";\nimport Login from \"./components/login/index\";\nimport Details from \"./components/home/components/article/components/details\";\nimport Pay from \"./components/home/components/article/components/pay\";\nimport './mock/article';\nexport const AuthContext = React.createContext({\n  data: {},\n  setData: () => {},\n  setPay: () => {},\n  getData: () => {}\n});\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setData = obj => {\n      this.setState({\n        data: obj\n      });\n    };\n\n    this.setPay = () => {\n      axios.get('/api/user/profile/pay').then(res => {\n        console.log(res);\n        this.setState({\n          pay: res.data.pay\n        });\n        window.location.href = 'http://localhost:3000/#/';\n      });\n    };\n\n    this.getData = () => {\n      let nickname = localStorage.getItem('nickname');\n\n      if (nickname) {\n        axios.get('/api/user/profile').then(res => {\n          console.log(res.data.data);\n          this.state.setData(res.data.data);\n        });\n      }\n    };\n\n    this.state = {\n      data: {\n        mobile: '',\n        nickname: \"\",\n        flat: false // 判断当前是否登入\n\n      },\n      pay: false,\n      //判断是否订阅\n      setData: this.setData,\n      setPay: this.setPay,\n      getData: this.getData\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    return React.createElement(AuthContext.Provider, {\n      value: this.state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(HashRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: Home,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/register\",\n      component: Register,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      component: Login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/personal\",\n      component: Personal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/article/details/:id\",\n      component: Details,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/article/pay\",\n      component: Pay,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/miku/work/react/react-work/demo/src/app.js"],"names":["React","Component","HashRouter","Switch","Route","axios","Home","Register","Personal","Login","Details","Pay","AuthContext","createContext","data","setData","setPay","getData","App","constructor","props","obj","setState","get","then","res","console","log","pay","window","location","href","nickname","localStorage","getItem","state","mobile","flat","componentDidMount","render"],"mappings":"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","sourcesContent":["import React,{Component}from \"react\";\r\nimport {HashRouter, Switch, Route} from \"react-router-dom\"\r\nimport axios from 'axios';\r\n\r\nimport Home from \"./components/home/index\"\r\nimport Register from \"./components/register/\"\r\nimport Personal from \"./components/personal/index\"\r\nimport Login from \"./components/login/index\"\r\n\r\nimport Details from \"./components/home/components/article/components/details\";\r\nimport Pay from \"./components/home/components/article/components/pay\";\r\n\r\n\r\nimport './mock/article';\r\n\r\nexport const AuthContext = React.createContext({\r\n    data: {},\r\n    setData:()=>{\r\n\r\n    },\r\n    setPay:()=>{\r\n\r\n    },\r\n    getData:()=>{\r\n\r\n    }\r\n})\r\n\r\nclass App extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.setData = (obj) => {\r\n            this.setState({ data: obj })\r\n        }\r\n\r\n        this.setPay=()=>{\r\n            axios.get('/api/user/profile/pay')\r\n                .then((res) => {\r\n                    console.log(res)\r\n                    this.setState({\r\n                        pay:res.data.pay,\r\n                    })\r\n                    window.location.href = 'http://localhost:3000/#/';\r\n                })\r\n        }\r\n\r\n        this.getData=()=>{\r\n            let nickname = localStorage.getItem('nickname')\r\n            if (nickname) {\r\n                axios.get('/api/user/profile')\r\n                    .then((res) => {\r\n                        console.log(res.data.data)\r\n                        this.state.setData(res.data.data)\r\n                    })\r\n            }\r\n        }\r\n        this.state = {\r\n            data: {\r\n                mobile: '',\r\n                nickname: \"\",\r\n                flat:false, // 判断当前是否登入\r\n            },\r\n\r\n            pay:false,  //判断是否订阅\r\n            setData:this.setData,\r\n            setPay:this.setPay,\r\n            getData:this.getData\r\n\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getData()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <AuthContext.Provider value={this.state}>\r\n                <HashRouter>\r\n                    <Switch>\r\n                        <Route exact path=\"/\" component={Home}></Route>\r\n                        <Route exact path=\"/register\" component={Register}></Route>\r\n                        <Route path=\"/login\" component={Login}></Route>\r\n                        <Route path=\"/personal\" component={Personal}></Route>\r\n                        <Route path=\"/article/details/:id\" component={Details}></Route>\r\n                        <Route path=\"/article/pay\" component={Pay}></Route>\r\n\r\n\r\n                    </Switch>\r\n                </HashRouter>\r\n            </AuthContext.Provider>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}